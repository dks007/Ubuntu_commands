from django.db import models
from django.db.models import Q

class ExpertMasterManager(models.Manager):
    def get_experts_with_email_and_status(self):
        return self.filter(
            ~Q(expert_email='') & ~Q(expert_email__isnull=True),
            status=1
        ).order_by('expert_name')

class ExpertMaster(models.Model):
    expert_account_id = models.CharField(max_length=100, null=True, blank=True)
    expert_name = models.CharField(max_length=100, unique=True)
    expert_email = models.CharField(max_length=255, null=True, blank=True)
    created_date = models.DateTimeField(auto_now_add=True)
    updated_date = models.DateTimeField(auto_now=True)
    status = models.ForeignKey('StatusMaster', on_delete=models.PROTECT, default=1)

    objects = ExpertMasterManager()
